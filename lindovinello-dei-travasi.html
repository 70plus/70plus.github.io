<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>L&#x27;indovinello dei travasi - 70plus - and still a lot to do</title><meta name="description" content="L'indovinello dei travasi è un classico dei puzzle logici, ed è anche in una scena del film Die Hard - duri a morire. Affrontiamolo con Python."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://70plus.it/lindovinello-dei-travasi.html"><link rel="alternate" type="application/atom+xml" href="https://70plus.it/feed.xml"><link rel="alternate" type="application/json" href="https://70plus.it/feed.json"><meta property="og:title" content="L'indovinello dei travasi"><meta property="og:site_name" content="70plus - and still a lot to do"><meta property="og:description" content="L'indovinello dei travasi è un classico dei puzzle logici, ed è anche in una scena del film Die Hard - duri a morire. Affrontiamolo con Python."><meta property="og:url" content="https://70plus.it/lindovinello-dei-travasi.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://70plus.it/assets/css/style.css?v=a658f9393ff28f34900551a5d4f62373"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://70plus.it/lindovinello-dei-travasi.html"},"headline":"L'indovinello dei travasi","datePublished":"2023-01-02T13:53","dateModified":"2023-03-26T15:50","description":"L'indovinello dei travasi è un classico dei puzzle logici, ed è anche in una scena del film Die Hard - duri a morire. Affrontiamolo con Python.","author":{"@type":"Person","name":"Pasquale","url":"https://70plus.it/authors/pasquale/"},"publisher":{"@type":"Organization","name":"Pasquale"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><link rel="me" href="https://mastodon.uno/@pasqualepetrosino"></head><body><script src="https://swetrix.org/swetrix.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', function() {
    swetrix.init('WoH0No9arSTq')
    swetrix.trackViews()
  })</script><noscript><img src="https://api.swetrix.com/log/noscript?pid=WoH0No9arSTq" alt="" referrerpolicy="no-referrer-when-downgrade"></noscript><div class="container js-container"><nav class="menu"><ul class="navbar__menu"><li><a href="https://70plus.it/" target="_self">Home</a></li><li class="has-submenu"><span>Argomenti</span><ul class="navbar__submenu"><li><a href="https://70plus.it/tags/numeri/" target="_self">Numeri</a></li><li><a href="https://70plus.it/tags/cose-informatiche/" target="_self">Cose informatiche</a></li><li><a href="https://70plus.it/tags/cucina/" target="_self">Cucina</a></li><li><a href="https://70plus.it/tags/pensieri/" target="_self">Pensieri</a></li><li><a href="https://70plus.it/tags/ricordi/" target="_self">Ricordi</a></li><li><a href="https://70plus.it/tags/produttivita/" title="Produttività" target="_self">Produttività</a></li></ul></li><li class="has-submenu"><a href="https://70plus.it/javascript.html" target="_self">Javascript</a><ul class="navbar__submenu"><li><a href="tris1.html" target="_self">Tris</a></li><li><a href="lunaplay.html" target="_self">LunaPlay</a></li><li><a href="quantonesai.html" target="_self">Quanto ne sai?</a></li><li><a href="cliccami.html" target="_self">Cliccami!</a></li></ul></li><li><a href="https://70plus.it/ambienti-online-per-python.html" target="_self">Ambienti online per Python</a></li><li><a href="https://70plus.it/la-cucina-vista-da-me.html" target="_self">La cucina vista da me</a></li><li><a href="https://70plus.it/cookies-e-privacy-policy.html" target="_self">Cookie e Privacy Policy</a></li><li><a href="https://70plus.it/su-di-me.html" title="Su di me" target="_self">Su di me</a></li></ul></nav><div class="content"><header class="top"><div class="top__item"><a class="logo" href="https://70plus.it/">70plus - and still a lot to do</a></div><div class="top__item top__item--right"><button class="menu-toggle js-menu-toggle" aria-label="Menu" aria-expanded="false"><span class="menu-toggle-box"><span class="menu-toggle-inner">Menu</span></span></button></div></header><main class="main"><article class="post"><div class="main__left"><figure class="hero"><img src="https://70plus.it/media/website/questions-1922477_1920.jpg" srcset="https://70plus.it/media/website/responsive/questions-1922477_1920-xs.jpg 300w, https://70plus.it/media/website/responsive/questions-1922477_1920-sm.jpg 480w, https://70plus.it/media/website/responsive/questions-1922477_1920-md.jpg 768w, https://70plus.it/media/website/responsive/questions-1922477_1920-lg.jpg 1024w, https://70plus.it/media/website/responsive/questions-1922477_1920-xl.jpg 1280w, https://70plus.it/media/website/responsive/questions-1922477_1920-2xl.jpg 1600w" sizes="(min-width: 1800px) 50vw, (min-width: 900px) 40vw, 100vw" loading="eager" width="1920" height="3000" alt="Ricordi, numeri, pensieri"></figure><header><h1>L&#x27;indovinello dei travasi</h1><p><time datetime="2023-01-02T13:53">2 Jan 2023 </time>by <a href="https://70plus.it/authors/pasquale/" rel="author" title="Pasquale">Pasquale</a></p></header></div><div class="main__right"><div class="post__entry"><p>Nel film <strong>Die Hard - Duri a morire</strong>, la coppia del poliziotto McClane (Bruce Willis) e del negoziante Zeus Carver (Samule L. Jackson) si trova a risolvere un enigma logico-matematico per disinnescare una bomba che sta per esplodere.<br>Devono isolare una quantità di 4 galloni d'acqua, avendo a disposizione due recipienti non graduati da 3 e 5 galloni, rispettivamente. Ci riescono, ovviamente pochi attimi prima dell'esplosione, mediante una serie di: riempi, svuota e travasa tra i due recipienti.<br><br>Come si affronta un problema del genere? Quando è possibile trovare una soluzione, e quando no? Vediamo come risolvere, a cavallo tra matematica e Python.</p><h4>Le mosse del gioco</h4><p>Per dare un minimo di generalità al problema, denotiamo con <strong>A</strong> e <strong>B</strong> i due recipienti e con <strong>Q</strong> la quantità di acqua da isolare.<br><br>Si può procedere attraverso questo approccio:</p><ol><li>riempire il recipiente <strong>A</strong>;</li><li>versare il contenuto di <strong>A</strong> in <strong>B</strong>, tutto o per quanto è possibile senza far traboccare <strong>B</strong>;</li><li>quando <strong>B</strong> si riempie completamente, svuotarlo;</li><li>ripetere i punti 2. e 3., fino a che:<br><ol style="list-style-type: lower-alpha;"><li>in uno dei due contenitori rimane la quantità <strong>Q</strong> (gioco risolto! fine della procedura),</li><li>oppure <strong>A</strong> si svuota;</li></ol></li><li>ripartire dal punto 1.</li></ol><p>È ovviamente possibile anche eseguire la procedura scambiando i ruoli tra A e B.<br>Che una delle due sequenze (o entrambe) risolvano il problema è ancora da dimostrare, è però evidente (o almeno così mi pare) che non vi siano altri metodi percorribili.</p><h4>Un'equazione diofantea e la matematica dell'orologio</h4><p>Cerchiamo di tradurre in termini matematici la prima delle due procedure. Per l'altra si potrà procedere in modo analogo.<br><br>Alla fine del gioco, avremo riempito <strong>x</strong> volte il contenitore <strong>A</strong> e svuotato <strong>y</strong> volte il contenitore <strong>B</strong>, arrivando alla situazione in cui in <strong>A</strong> o in <strong>B</strong> si trova una quantità <strong>Q</strong> di acqua. In altri termini:</p><p class="align-center"><strong>xA = yB + Q</strong></p><p>Un'equazione di questo tipo,  si dice <strong>diofantea</strong>, dal matematico greco Diofanto di Alessandria, quando i coefficienti A, B e Q, e le soluzioni x, y sono numeri interi.<br><br>Un altro modo di scrivere questa equazione è quello di utilizzare l'aritmetica modulare, inventata da Carl Friedrich Gauss, e anche detta aritmetica dell'orologio:</p><p class="align-center"><strong>xA ≡ Q mod B</strong><br><br></p><p>Ebbene, si dimostra che questa congruenza:</p><ul><li>se A e B sono primi tra loro, ha esattamente una soluzione;</li><li>se A e B hanno un MCD d ≠1, ha d soluzioni se d divide Q;</li><li>in tutti gli altri casi, ha zero soluzioni.</li></ul><h4>L'aritmetica modulare spiegata semplice</h4><p>Beh, quantomeno spero di riuscire a raccontarla in modo semplice.<br>Partiamo <strong>dall'orologio</strong>: se aggiungo 7 ore alle 10 (di mattina o di sera) ottengo le 5 (rispettivamente di sera o di mattina). Sto eseguendo infatti una somma in modulo 12, e il risultato di un'operazione tra interi potrà solo dare un risultato intero tra 0 e 11.</p><p>Nella notazione modulare, l'operazione si scrive così:</p><p class="align-center"><strong>7 + 10 ≡ 5 mod 12</strong></p><p>e si legge: 7 più 10 è congruente a 5, modulo 12.<br>La divisione tra interi fornisce un altro modo per spiegare la congruenza:</p><p class="align-center"><strong>7 + 10 fa 17, che diviso per 12 dà un resto di 5</strong></p><p>Nell'aritmetica modulare le congruenze prendono il posto delle equazioni. Ci si può chiedere, ad esempio, quali valori interi di x soddisfino la congruenza:</p><p class="align-center"><strong>11x ≡ 4 mod 7</strong></p><p>Per risolverla, occorre trovare un multiplo di 11 che sia contiguo a un multiplo di 7. Un po' di calcolo mentale e si nota che 22 e 21 sono contigui.<br><br>Bene, moltiplichiamo entrambi i membri della congruenza per 2, e sviluppiamo:</p><blockquote><p>22x ≡ 8 mod 7<br>21x + x ≡ 7 + 1 mod 7<br>x ≡ 1 mod 7</p></blockquote><h4>La risoluzione dell'indovinello di Die Hard</h4><p>Le due congruenze in gioco in questo caso sono:</p><blockquote><p>3x ≡ 4 mod 5      [1]<br>5y ≡ 4 mod 3     [2]</p></blockquote><p>Che conducono a due diverse strategie di soluzione. Risolviamo prima la [1].<br>Moltiplichiamo per 3 entrambi i membri:</p><blockquote><p>9x ≡ 12 mod 5<br>10x - x ≡ 10 + 2 mod 5<br>-x ≡ 2 mod 5<br>x ≡ 3 - 5 mod 5<br>x ≡ 3 mod 5</p></blockquote><p>Quindi occorrerà riempire 3 volte il recipiente A (capacità: 3 galloni, per un totale di 9 galloni), svuotare 1 volta il recipiente B (5 galloni). In B rimangono 4 galloni, come richiesto.</p><p>Cosa accade risolvendo la [2]? Riscriviamola come:</p><blockquote><p>6y - y ≡ 3 + 1 mod 3<br>-y ≡ 1 mod 3<br>y ≡ 2 - 3 mod 3<br>y ≡ 2 mod 3</p></blockquote><p>Quindi, in questo caso, occorre riempire due volte il contenitore B (10 galloni), svuotandolo 2 volte nel recipiente A (6 galloni), lasciando 4 galloni in B.</p><h4>Un semplice programma Python per risolvere l'indovinello</h4><p>Il codice del programma, con i valori dei due contenitori richiesti dalla [1]:</p><blockquote><p>A,B = 3,5<br>Q = 4<br>#<br>a,b = 0,0<br>n_op, n_op_max = 0, B + 1<br>#<br>while a != Q and b != Q and n_op &lt; n_op_max:<br>  if a == 0:<br>    a = A<br>    n_op += 1<br>    print (n_op, '- riempio A [{}/{}, {}/{}]'.format(a, A, b, B))<br>  elif b == B:<br>    b = 0<br>    print (n_op, '- svuoto B [{}/{}, {}/{}]'.format(a, A, b, B))<br>  elif a &lt;= B - b:<br>    b = b + a<br>    a = 0<br>    print (n_op, '- travaso A in B [{}/{}, {}/{}]'.format(a, A, b, B))<br>  else:<br>    t = B - b<br>    a -= t<br>    b = B       <br>    print (n_op,'- travaso {} da A in B, fino a riempire B [{}/{}, {}/{}]'.format(t, a, A, b, B))<br>#<br>if a == Q:<br>   print ('in A è rimasta una quantità',a)<br>elif b == Q:<br>   print ('in B è rimasta una quantità',b)<br>else:<br>   print ('non ho trovato una soluzione')</p></blockquote><p>Ed ecco il risultato:</p><blockquote><p>1 - riempio A [3/3, 0/5]<br>1 - travaso A in B [0/3, 3/5]<br>2 - riempio A [3/3, 3/5]<br>2 - travaso 2 da A in B, fino a riempire B [1/3, 5/5]<br>2 - svuoto B [1/3, 0/5]<br>2 - travaso A in B [0/3, 1/5]<br>3 - riempio A [3/3, 1/5]<br>3 - travaso A in B [0/3, 4/5]<br>in B è rimasta una quantità 4</p></blockquote><p>In ogni riga viene riportato:</p><ul><li>il numero di riempimenti di A, fina a quel punto;</li><li>l'azione compiuta;</li><li>lo stato in cui vengono lasciati A e B.</li></ul><p>Scambiando i valori di A e B si ottiene la soluzione per l'equazione [2]:</p><blockquote><p>A,B = 5,3</p></blockquote><p>Il risultato diviene:</p><blockquote><p>1 - riempio A [5/5, 0/3]<br>1 - travaso 3 da A in B, fino a riempire B [2/5, 3/3]<br>1 - svuoto B [2/5, 0/3]<br>1 - travaso A in B [0/5, 2/3]<br>2 - riempio A [5/5, 2/3]<br>2 - travaso 1 da A in B, fino a riempire B [4/5, 3/3]<br>in A è rimasta una quantità 4</p></blockquote><p>E ora, basta travasi!</p><p><em><strong>Nota</strong><strong>:</strong> questo post riprende un mio vecchio post su Wix.com.</em></p><footer><div class="post__tag-share"><ul class="post__tag"><li><a href="https://70plus.it/tags/numeri/">Numeri</a></li></ul><div class="post__share"></div></div><div class="post__bio"><h3><a href="https://70plus.it/authors/pasquale/" title="Pasquale">Pasquale</a></h3><div class="post__bio-desc">Dopo innumerevoli anni da informatico, tra Ivrea e Milano, finalmente a riposo sulle rive del lago di Lecco. Scrivimi a: 70plus@libero.it</div></div></footer></div></div></article></main><footer class="footer"><div class="footer__copyright">Powered by Publii</div></footer></div></div><script defer="defer" src="https://70plus.it/assets/js/scripts.min.js?v=27706a8fe221267c1834098c796f44c1"></script><script>var images = document.querySelectorAll('img[loading]');
   
           for (var i = 0; i < images.length; i++) {
               if (images[i].complete) {
                   images[i].classList.add('is-loaded');
               } else {
                   images[i].addEventListener('load', function () {
                       this.classList.add('is-loaded');
                   }, false);
               }
           }</script></body></html>